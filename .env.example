# =============================================================================
# MOBILE REPAIR DASHBOARD - ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control (add to .gitignore)
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION SETTINGS
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3001
API_URL=http://localhost:3001
FRONTEND_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL="postgresql://repair_admin:your_secure_password@localhost:5432/mobile_repair_db"

# Connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=10

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION (for caching and sessions)
# -----------------------------------------------------------------------------
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""

# Session configuration
SESSION_SECRET="your_very_long_random_session_secret_here_change_this"
SESSION_MAX_AGE=28800000  # 8 hours in milliseconds

# -----------------------------------------------------------------------------
# AUTHENTICATION & SECURITY
# -----------------------------------------------------------------------------
# JWT settings
JWT_SECRET="your_very_long_random_jwt_secret_here_change_this"
JWT_EXPIRY="8h"
JWT_REFRESH_SECRET="your_refresh_token_secret_here_change_this"
JWT_REFRESH_EXPIRY="7d"

# Password hashing (bcrypt rounds)
BCRYPT_ROUNDS=10

# CORS allowed origins (comma-separated)
CORS_ORIGINS="http://localhost:3000,http://localhost:3001"

# -----------------------------------------------------------------------------
# TWILIO (SMS NOTIFICATIONS)
# -----------------------------------------------------------------------------
# Sign up at: https://www.twilio.com/
TWILIO_ACCOUNT_SID="ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
TWILIO_AUTH_TOKEN="your_twilio_auth_token"
TWILIO_PHONE_NUMBER="+1234567890"
TWILIO_ENABLED=true

# SMS settings
SMS_RATE_LIMIT=100  # Max SMS per day (cost control)
SMS_COST_PER_MESSAGE=0.0079  # USD per SMS (for tracking)

# -----------------------------------------------------------------------------
# SENDGRID (EMAIL NOTIFICATIONS)
# -----------------------------------------------------------------------------
# Sign up at: https://sendgrid.com/
SENDGRID_API_KEY="SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
SENDGRID_FROM_EMAIL="noreply@yourrepairshop.com"
SENDGRID_FROM_NAME="Your Repair Shop"
SENDGRID_ENABLED=true

# Email settings
EMAIL_RATE_LIMIT=1000  # Max emails per day

# -----------------------------------------------------------------------------
# LIGHTSPEED POS INTEGRATION
# -----------------------------------------------------------------------------
# Sign up at: https://www.lightspeedhq.com/
# Get API credentials from your Lightspeed account
LIGHTSPEED_ACCOUNT_ID=""
LIGHTSPEED_CLIENT_ID=""
LIGHTSPEED_CLIENT_SECRET=""
LIGHTSPEED_ACCESS_TOKEN=""
LIGHTSPEED_REFRESH_TOKEN=""
LIGHTSPEED_API_URL="https://api.lightspeedapp.com/API/V3"
LIGHTSPEED_ENABLED=false  # Set to true when ready to integrate

# Sync settings
LIGHTSPEED_SYNC_INTERVAL=900000  # 15 minutes in milliseconds
LIGHTSPEED_AUTO_SYNC=false  # Auto-sync customers

# -----------------------------------------------------------------------------
# PAYMENT PROCESSING
# -----------------------------------------------------------------------------
# Stripe (recommended)
# Sign up at: https://stripe.com/
STRIPE_SECRET_KEY="your_stripe_secret_key_here"
STRIPE_PUBLISHABLE_KEY="your_stripe_publishable_key_here"
STRIPE_WEBHOOK_SECRET="your_stripe_webhook_secret_here"
STRIPE_ENABLED=false

# Alternative: Square
SQUARE_ACCESS_TOKEN=""
SQUARE_LOCATION_ID=""
SQUARE_ENABLED=false

# -----------------------------------------------------------------------------
# FILE STORAGE
# -----------------------------------------------------------------------------
# Local storage (development)
STORAGE_TYPE=local  # Options: local, s3, cloudinary
UPLOAD_DIR="./uploads"
MAX_FILE_SIZE=10485760  # 10MB in bytes

# AWS S3 (production recommended)
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""
AWS_REGION="us-east-1"
AWS_S3_BUCKET="mobile-repair-uploads"
AWS_S3_URL="https://mobile-repair-uploads.s3.amazonaws.com"

# Cloudinary (alternative for images)
CLOUDINARY_CLOUD_NAME=""
CLOUDINARY_API_KEY=""
CLOUDINARY_API_SECRET=""
CLOUDINARY_URL=""

# -----------------------------------------------------------------------------
# MONITORING & LOGGING
# -----------------------------------------------------------------------------
# Log level: error, warn, info, debug
LOG_LEVEL=info

# Sentry (error tracking)
# Sign up at: https://sentry.io/
SENTRY_DSN=""
SENTRY_ENABLED=false

# Google Analytics
GA_TRACKING_ID=""

# -----------------------------------------------------------------------------
# BUSINESS SETTINGS
# -----------------------------------------------------------------------------
BUSINESS_NAME="Your Mobile Repair Shop"
BUSINESS_PHONE="+1234567890"
BUSINESS_EMAIL="info@yourrepairshop.com"
BUSINESS_ADDRESS="123 Main Street"
BUSINESS_CITY="Your City"
BUSINESS_STATE="CA"
BUSINESS_ZIP="12345"
BUSINESS_COUNTRY="USA"

# Operating hours (24-hour format)
BUSINESS_HOURS_MON="09:00-18:00"
BUSINESS_HOURS_TUE="09:00-18:00"
BUSINESS_HOURS_WED="09:00-18:00"
BUSINESS_HOURS_THU="09:00-18:00"
BUSINESS_HOURS_FRI="09:00-18:00"
BUSINESS_HOURS_SAT="10:00-16:00"
BUSINESS_HOURS_SUN="closed"

# Tax rate (decimal, e.g., 0.0875 for 8.75%)
TAX_RATE=0.0875

# Currency
CURRENCY=USD
CURRENCY_SYMBOL=$

# -----------------------------------------------------------------------------
# SMART PRICING SETTINGS
# -----------------------------------------------------------------------------
# Confidence threshold for auto-applying estimated prices
PRICING_CONFIDENCE_THRESHOLD=80  # 0-100

# Enable/disable smart pricing
SMART_PRICING_ENABLED=true

# Price estimation methods: linear, weighted, average
PRICING_ESTIMATION_METHOD=linear

# -----------------------------------------------------------------------------
# NOTIFICATION TEMPLATES
# -----------------------------------------------------------------------------
# Auto-send notifications (or require manual approval)
NOTIFICATIONS_AUTO_SEND=true

# Pickup reminders schedule (hours after repair completion)
NOTIFICATION_PICKUP_REMINDER_1=24  # 24 hours
NOTIFICATION_PICKUP_REMINDER_2=72  # 3 days
NOTIFICATION_PICKUP_REMINDER_3=168  # 7 days

# -----------------------------------------------------------------------------
# BACKUP SETTINGS
# -----------------------------------------------------------------------------
# Automatic database backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Cron: Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET="mobile-repair-backups"

# -----------------------------------------------------------------------------
# RATE LIMITING & SECURITY
# -----------------------------------------------------------------------------
# API rate limiting (requests per minute)
RATE_LIMIT_WINDOW=60000  # 1 minute in milliseconds
RATE_LIMIT_MAX_REQUESTS=100

# Failed login attempts before lockout
MAX_LOGIN_ATTEMPTS=5
LOGIN_LOCKOUT_DURATION=900000  # 15 minutes in milliseconds

# Two-factor authentication
TWO_FACTOR_ENABLED=false

# -----------------------------------------------------------------------------
# DEVELOPMENT & TESTING
# -----------------------------------------------------------------------------
# Enable debug mode (verbose logging)
DEBUG=false

# Seed database with sample data
SEED_DATABASE=false

# Disable authentication (DEVELOPMENT ONLY - NEVER IN PRODUCTION)
DISABLE_AUTH=false

# Mock external services (for testing without real API keys)
MOCK_TWILIO=false
MOCK_SENDGRID=false
MOCK_LIGHTSPEED=false

# Test phone number (receives all SMS in dev mode)
DEV_TEST_PHONE="+1234567890"

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
# Enable/disable features during development
FEATURE_CUSTOMER_PORTAL=false
FEATURE_ONLINE_BOOKING=false
FEATURE_LOYALTY_PROGRAM=false
FEATURE_WARRANTY_TRACKING=true
FEATURE_QR_CHECKIN=false
FEATURE_MULTI_LOCATION=false

# =============================================================================
# NOTES
# =============================================================================
# 1. Generate strong random secrets:
#    node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
# 2. Keep production .env file secure and backed up
#
# 3. Use different credentials for development/staging/production
#
# 4. Rotate secrets regularly (every 90 days recommended)
#
# 5. Never share API keys or commit to version control
#
# 6. For production, consider using:
#    - AWS Secrets Manager
#    - HashiCorp Vault
#    - Doppler
#    - Railway/Heroku config vars
# =============================================================================
